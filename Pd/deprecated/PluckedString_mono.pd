#N canvas 762 161 1068 876 10;
#X obj 90 79 inlet;
#X obj 260 68 inlet;
#X obj 164 142 mtof;
#X obj 164 105 unpack 0 0;
#X text 139 76 pitch / velocity;
#X obj 138 303 noise~;
#X msg 246 340 0;
#X floatatom 252 239 5 0 0 0 - - -;
#X obj 133 668 *~ 0.99;
#X floatatom 191 647 5 0 0 0 - - -;
#X obj 246 313 del 3;
#X text 384 711 write back into buffer;
#X text 303 434 read out buffer;
#X text 304 454 delay time translates into pitch;
#X text 108 248 play sound;
#X text 108 26 PD implementation of the karplus strong algorithm;
#X text 102 8 http://www.rodrigocadiz.com/imc/ejemplos/Pd/Capitulo%205/
;
#X obj 89 212 / 1;
#X obj 91 166 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 63 139 1000;
#X obj 125 778 outlet~;
#X obj 262 208 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 178 709 delwrite~ \$0buffer 1000;
#X obj 163 447 vd~ \$0buffer 100;
#X obj 140 393 *~;
#X obj 435 193 block~ 8;
#X obj 114 742 *~ 1;
#X obj 195 203 *;
#X obj 263 275 clip 2 1000;
#X obj 151 171 expr sqrt(1000./$f1);
#X obj 230 149 * 0.0005;
#X text 310 70 decay <msec>;
#X obj 194 606 expr exp(-1000/$f1/$f2);
#X obj 148 523 lop~;
#X text 256 650 damping (calculated from decay time);
#X text 345 275 minimum delay is 2 ms \, so clip at 2 ms.;
#X text 284 343 fill buffer with random values;
#X text 285 360 turn noise source on at keydown and turn off after
a one period delay;
#X obj 260 104 route decay filter init;
#X obj 42 109 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X connect 0 0 3 0;
#X connect 1 0 38 0;
#X connect 2 0 17 1;
#X connect 2 0 18 0;
#X connect 2 0 32 0;
#X connect 3 0 2 0;
#X connect 3 1 30 0;
#X connect 5 0 24 0;
#X connect 6 0 24 1;
#X connect 7 0 23 0;
#X connect 7 0 28 0;
#X connect 8 0 22 0;
#X connect 8 0 26 0;
#X connect 9 0 8 1;
#X connect 10 0 6 0;
#X connect 17 0 7 0;
#X connect 18 0 17 0;
#X connect 18 0 10 0;
#X connect 19 0 17 0;
#X connect 23 0 33 0;
#X connect 24 0 22 0;
#X connect 26 0 20 0;
#X connect 27 0 24 1;
#X connect 28 0 10 1;
#X connect 28 0 29 0;
#X connect 29 0 27 0;
#X connect 30 0 21 0;
#X connect 30 0 27 1;
#X connect 32 0 9 0;
#X connect 32 0 8 1;
#X connect 33 0 8 0;
#X connect 38 0 32 1;
#X connect 38 1 33 1;
#X connect 38 2 39 0;
#X connect 39 0 19 0;
